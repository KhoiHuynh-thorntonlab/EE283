---
title: "ee283lab1"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

tibble chapter 7:



```{r}
#small test tibble:
library(tidyverse)
tibble(tes=c("test1","test2"),res=c(1,2))
```
 tibble exercise 1:
 if a data is a tibble, the first line when the data is printed will be the description of tibble data frame dimension. for example, for the above tibble, the first line when print is A tibble: 2 x 2. If the data is just a normal data frame, it will be printed as a normal spread sheet without the tibble dimension desription.

 tibble question 2:
 
```{r}
df <-data.frame(abc=1,xyz="a")
dt<-tibble(abc=c(1),xyz=c("a"))
```
the tibble table will not convert xyz data to string compared to base r data.frame:

```{r}
typeof(df$xyz)
typeof(dt$xyz)
```
in addition, tibble will only highlight your data when called which make it less confusing comparing to how R base data frame with the row.name and the data in the same intensity. Rbase dataframe can also create rowname by default when tibble doesn't.

also, when print, r dataframe will print a large number of data by default which will take a longer time compared to tibble print of only the first ten row or so. 
tibble data table will also has the type of data (character or double) printed out by default which help a lot when R dataframe doesn't.


tibble question 3:

```{r}

#column name must be inside a backtick (the same key as ~)

annoying <-tibble(`1`=1:10, `2`=`1`*2+rnorm(length(`1`)))
annoying
annoying$`1`
plot(annoying$`1`,annoying$`2`)
new <- add_column(annoying, `3` = annoying$`2`/annoying$`1`)
new
renamenew<-rename(new, "one"=`1`,"two"=`2`,"three"=`3`)
renamenew

```


tibble question 5:

tibble::enframe(): convert atomic vectors or list to two column data frame. This can be used when the data you get are represented as a vector. By converting, R will work better with the data as data frame


tibble question 6:
tibble.max_extra_cols used to control number of extra column printed.



readr question 1:

to read data with | as delimiter: read_delim("file",delim="|")

readr question 2:

common option between read_csv, and read_tsv: col_names, col_types,locale,na, quote_na, quote,trim_ws,n_max, guess_max,progress, skip_empty_rows



readr question 4:

read_csv("x,y\n1,'a,b'",quote="\'") to read in "x,y\n1,'a,b'"

```{r}
read_csv("x,y\n1,'a,b'",quote="\'")

```


exercise 3 first set chapter 9

first step is to convert the long data to wide data

```{r}


table2

newtable2 <- spread(table2, type, count,fill=NA,convert=FALSE)

newtable2


#then, just repeat these step to get the plot

newtable2 %>% mutate(rate = cases / population * 10000)

newtable2 %>% count(year, wt = cases)

library(ggplot2)
ggplot(newtable2, aes(year, cases)) + geom_line(aes(group = country), colour = "grey50") + geom_point(aes(colour = country))
  
```

exercise 2 second set chapter 9:

gather is used to gather data to new pair of variables that make the data more tidy. for example, table4a has the two variable columns as 1999 and 2000 which make it very difficult to work on the data. With gather, column 2000,1999 will become year and case column respectively and make it easier to work with.

the code provided in exercise question fail because they set the 1999 or 2000 as values not column name. to fix the problem, the 1999, and 2000 must be in backtick since they are column name and are numbers.

```{r}

table4a

table4a %>%  gather(`1999`,`2000`,key ="year",value="cases")
```


adding flight_id as surrogate key for each unique flight:

```{r}
library(nycflights13)
flights

flights2 <- flights %>% arrange(year,month,day,sched_dep_time,carrier,flight) %>% mutate(flight_id=row_number()) %>% glimpse()

```


adding latitute and longtitude to flights data set from airports data set using left_join by either destination or origin

```{r}

#left_join: join 2 data set airports to flights, by comparing location or origin from flight data to location or origin from airports data


flights %>% left_join(airports,by=c(dest="faa")) %>% left_join(airports,by=c(origin="faa")) %>% head()

```